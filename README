
Start scripts to manage R and RStudio in Singularity
====================================================

These scripts can be deployed with the containers 
[mlell/singularity-r](https://bitbucket.org/mlell/singularity-r) and 
[mlell/singularity-rstudio](https://bitbucket.org/mlell/singularity-rstudio).

The following text can be used as an example README for the projects where
these scripts are used.

When RStudio is included in the container, additional information about running
RStudio Server is included in the file [README.RStudio](README.RStudio).

-------------------------------------------------------------------------------

Computation environment
======================

This project contains the computation environment where it was created in as
a Singularity container. Therefore, it can be run anywhere Singularity is
installed without further dependencies.

Inside the container, this project folder is available under the path `/proj`.
Therefore, the paths are independent from the machine.

First run of the project
========================

These steps are nessecary when you want to work with this project for the first
time:

 1. When using AsReml 3: Copy your asreml.lic file into the project root

 2. If you are behind a proxy server, create a file named `.Renviron`. On 
    Windows, take care that the file doesn't get a `.txt` file extension. Save
	  the the needed environment variables. For example, for a HTTP proxy:

        http_proxy="http://proxy.example.com:3128"
        https_proxy="http://proxy.example.com:3128"

    If you have another proxy, check the cURL manual to see which environment 
    variables you have to set.
	
 3. To run R in the command line or to run a script, follow the next two 
    sections. To start RStudio Server, which is useful for developing and
    debugging, continue with section "First start of RStudio Server".

Start an R session
==================

Use the script `cexec` to start R. Open a shell, change working directory to
the project folder and type 

    ./cexec R

Again, do not forget that R sees your project files under the path `/proj`.

Execute R scripts
=================

The container for this project includes RStudio as well as bare-bone R. 
Follow the steps in this section if you want to execute R 
without running RStudio. You don't have to do this if you want to run RStudio 
and run an R script from there. 
In RStudio, just use the normal R and Rscript calls. See below on how to prepare
and start RStudio. 
 
Open a shell. You can run R scripts with the help of `./cexec`, that you find 
in the same folder as this README. For example, to run an R script called `example.R`:

    ./cexec Rscript example.R

